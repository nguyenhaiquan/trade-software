function MarketPanel(n,t){this.mktPanel=n;this.symbol=t;this.priceData=[];this.volumeData=[];this.hchart=null;this.startTime;this.endTime;this.breakingTime;this.refPrice;this.resetChart();this.createChart()}function HoseIndexChartInit(n){typeof n!="undefined"&&n!=null&&n!=""&&n!="undefined"&&MarketHoseChart!=null&&MarketHoseChart!="undefined"&&MarketHoseChart.updateChartInit(n)}function HnxIndexChartInit(n){typeof n!="undefined"&&n!=null&&n!=""&&n!="undefined"&&MarketHnxChart!=null&&MarketHnxChart!="undefined"&&MarketHnxChart.updateChartInit(n)}function Vn30IndexChartInit(n){typeof n!="undefined"&&n!=null&&n!=""&&n!="undefined"&&MarketVn30Chart!=null&&MarketVn30Chart!="undefined"&&MarketVn30Chart.updateChartInit(n)}function Vnx50IndexChartInit(n){typeof n!="undefined"&&n!=null&&n!=""&&n!="undefined"&&MarketVnx50Chart!=null&&MarketVnx50Chart!="undefined"&&MarketVnx50Chart.updateChartInit(n)}MarketPanel.prototype={createChart:function(){this.hChart=new Highcharts.Chart({chart:{renderTo:this.mktPanel,margin:[20,40,20,40],animation:!1,reflow:!1,backgroundColor:chartBackColor,defaultSeriesType:"line"},credits:{enabled:!1},title:{text:null},legend:{enabled:!1},plotOptions:{series:{marker:{enabled:!1},states:{hover:{enabled:!1}},shadow:!1,animation:!1},area:{fillOpacity:.5,lineWidth:1}},xAxis:{title:{text:null},labels:{style:{fontSize:"9px",color:chartxAxisColor}},type:"datetime",dateTimeLabelFormat:"%H:%M",tickPixelInterval:50},yAxis:[{title:{text:null},labels:{style:{fontSize:"9px",color:chartyAxisColor}},gridLineColor:chartGridLineColor,endOnTick:!1,startOnTick:!0},{title:{text:null},labels:{style:{fontSize:"9px",color:"White"}},gridLineWidth:0,endOnTick:!1,startOnTick:!1,opposite:!0}],tooltip:{formatter:function(){var n='<span style="font-size:10px;font-weight:bold;">'+Highcharts.dateFormat("%H:%M:%S",this.x)+"<\/span><br/>";return $.each(this.points,function(t,i){n+='<span style="font-size:10px;">'+i.series.name+':<\/span><span style="font-size:10px;font-weight:bold;">'+addCommas(i.y)+(i.series.name=="Vol"?"k":"")+"<\/span>"}),n},shared:!0,shadow:!1,crosshairs:{color:"#FF0000"}},series:[{name:this.symbol,color:chartIndexColor,negativeColor:"#FF0000",data:[],zIndex:10},{name:"Vol",type:"area",color:chartVolColor,data:[],yAxis:1,zIndex:5},{tooltip:{valueDecimals:2}}]})},updateChartInit:function(n){var t,u,i,e,f,r,o;if(this.priceData=[],this.volumeData=[],t=this,u=JXG.decompress(n).split("@"),u.length>0){for(i=u[0].split("|"),i.length>=3&&(t.startTime=ConvertDateUTC(i[0]),t.endTime=ConvertDateUTC(i[1]),t.breakingTime=ConvertDateUTC(i[2]),t.refPrice=parseFloat(i[3])),e=u[1].split("#"),f=0;f<e.length-1;f++)r=DataParserMarketIndex.MarketIndexParse(e[f]),t.priceData.push([r.DealTime,r.Price]),t.volumeData.push([r.DealTime,r.Volumn/1e3]);t.volumeData.length>0&&t.volumeData[t.volumeData.length-1][0]>=t.breakingTime&&(t.volumeData.push([t.breakingTime,null]),t.volumeData.sort(Helper.sortChartData))}t.hChart.yAxis[0].removePlotLine("ref");t.hChart.yAxis[0].addPlotLine({id:"ref",value:t.refPrice,color:chartRefLineColor,dashStyle:"Dash",width:1.5,zIndex:5,label:{text:addCommas(t.refPrice),align:"center",verticalAlign:"middle",style:{color:chartRefLineLableColor,fontSize:"9px"}}});o=t.hChart.xAxis[0].getExtremes();(o.min!=t.startTime||o.max!=t.endTime)&&t.hChart.xAxis[0].setExtremes(t.startTime,t.endTime,!1,!1);t.hChart.series[0].update({threshold:t.refPrice});t.hChart.series[0].setData(t.priceData,!1);t.hChart.series[1].setData(t.volumeData,!1);t.hChart.redraw()},updateChart:function(n){var t=this,r,i,u;if(!(n.Volumn<=0)&&!(n.DealTime<t.startTime)&&!(n.DealTime>t.endTime)){for(r=!1,i=0;i<t.volumeData.length;i++)if(t.volumeData[i][0]==n.DealTime){r=!0;break}r!=!0&&(t.priceData.push([n.DealTime,n.Price]),t.volumeData.push([n.DealTime,n.Volumn/1e3]),t.volumeData.sort(Helper.sortChartData),t.volumeData.length>0&&t.volumeData[t.volumeData.length-1][0]>=t.breakingTime&&(t.volumeData.push([t.breakingTime,null]),t.volumeData.sort(Helper.sortChartData)),t.hChart.yAxis[0].removePlotLine("ref"),t.hChart.yAxis[0].addPlotLine({id:"ref",value:t.refPrice,color:chartRefLineColor,dashStyle:"Dash",width:1.5,zIndex:5,label:{text:addCommas(t.refPrice),align:"center",verticalAlign:"middle",style:{color:chartRefLineLableColor,fontSize:"9px"}}}),u=t.hChart.xAxis[0].getExtremes(),(u.min!=t.startTime||u.max!=t.endTime)&&t.hChart.xAxis[0].setExtremes(t.startTime,t.endTime,!1,!1),t.hChart.series[0].setData(t.priceData,!1),t.hChart.series[1].setData(t.volumeData,!1),t.hChart.redraw())}},setSize:function(n,t){var i=this;i.hChart.setSize(n,t)},resetChart:function(){typeof this.hChart!="undefined"&&this.hChart!=null&&this.hChart!=""&&this.hChart!="undefined"&&this.hChart.destroy()}};
/*
//# sourceMappingURL=MarketPanel.min.js.map
*/